<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Identity Verification ‚Äî Soulprint Docs</title>
<meta name="description" content="How Soulprint verifies identity ‚Äî OCR document reading, face matching, privacy-preserving proofs. All on-device, no PII uploaded.">
<link rel="stylesheet" href="shared.css">
</head>
<body>
<div class="topbar">
  <a href="/" class="topbar-logo">üåÄ Soulprint</a>
  <div class="topbar-links"><a href="https://github.com/manuelariasfz/soulprint">GitHub</a><a href="/">Home</a></div>
</div>
<div class="docs-layout">
  <aside class="sidebar">
    <div class="sidebar-logo">
      <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs><linearGradient id="g" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#7c6cf5"/><stop offset="100%" stop-color="#a78bfa"/>
        </linearGradient></defs>
        <circle cx="32" cy="26" r="18" fill="url(#g)"/>
        <rect x="14" y="26" width="36" height="20" fill="url(#g)"/>
        <circle cx="19" cy="48" r="5.5" fill="url(#g)"/>
        <circle cx="32" cy="49" r="5.5" fill="url(#g)"/>
        <circle cx="45" cy="48" r="5.5" fill="url(#g)"/>
        <ellipse cx="25" cy="25" rx="4.5" ry="3" fill="#0a0a0f"/>
        <ellipse cx="25" cy="25" rx="2.5" ry="1.8" fill="#ffffff"/>
        <ellipse cx="39" cy="25" rx="4.5" ry="3" fill="#0a0a0f"/>
        <ellipse cx="39" cy="25" rx="2.5" ry="1.8" fill="#ffffff"/>
      </svg>
      <span class="sidebar-logo-text">Soulprint Docs</span>
    </div>
    <nav>
      <div class="sidebar-section">Getting Started</div>
      <a href="index.html">Overview</a><a href="quickstart.html">Quick Start</a>
      <div class="sidebar-section">Core Concepts</div>
      <a href="verify.html" class="active">Identity Verification</a>
      <a href="trust-score.html">Trust Score (0‚Äì100)</a>
      <div class="sidebar-section">Integrations</div>
      <a href="mcp.html">MCP Servers</a><a href="openclaw.html">OpenClaw Bots</a>
      <div class="sidebar-section">Infrastructure</div>
      <a href="validator.html">Validator Node</a><a href="api.html">REST API Reference</a>
      <div class="sidebar-section">Ecosystem</div>
      <a href="countries.html">Country Support</a>
    </nav>
  </aside>
  <main class="content">
    <div class="doc-hero">
      <h1>ü™™ Identity Verification</h1>
      <p class="subtitle">How Soulprint proves you're human ‚Äî 100% locally, zero biometric data uploaded.</p>
    </div>

    <h2>The Verification Pipeline</h2>
    <div class="steps">
      <div class="step">
        <div class="step-body">
          <h3>Document capture</h3>
          <p>The user photographs or uploads their government-issued ID. Soulprint supports MRZ (Machine Readable Zone) on passports and national IDs, plus structured OCR for cards without MRZ (e.g. Colombian C√©dula).</p>
        </div>
      </div>
      <div class="step">
        <div class="step-body">
          <h3>OCR extraction</h3>
          <p>Tesseract OCR reads the document. Extracted fields: full name, document number, date of birth, nationality, expiry. Raw images are never stored ‚Äî only the extracted text is kept temporarily in memory.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-body">
          <h3>Face matching</h3>
          <p>InsightFace (Buffalo_L model) compares the ID photo with a live selfie. Match threshold: cosine similarity ‚â• 0.35 for document vs selfie (PROTOCOL.FACE_SIM_DOC_SELFIE ‚Äî immutable). The face embedding is computed on-device and immediately discarded after matching.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-body">
          <h3>Privacy proof generation</h3>
          <p>A unique identity hash is derived from the document data and face embedding. This hash is deterministic ‚Äî the same person always produces the same hash ‚Äî which enables anti-replay protection without storing identity data.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-body">
          <h3>Token issuance</h3>
          <p>An SPT (Soulprint Token) is issued and signed with an Ed25519 key generated on-device. The token contains: DID, credential list, identity score, expiry (6 months), and the proof hash. It is stored locally and never transmitted in full.</p>
        </div>
      </div>
    </div>

    <h2>Privacy Guarantees</h2>
    <table>
      <tr><th>Data</th><th>Stays on device?</th><th>Notes</th></tr>
      <tr><td>ID photos / selfies</td><td>‚úÖ Yes</td><td>Processed and discarded immediately</td></tr>
      <tr><td>Name, DOB, document number</td><td>‚úÖ Yes</td><td>Never included in any network call</td></tr>
      <tr><td>Face biometric embedding</td><td>‚úÖ Yes</td><td>Computed locally, used once for matching, then discarded</td></tr>
      <tr><td>Identity proof hash</td><td>üîÅ Shared</td><td>Sent to validator nodes for anti-replay only ‚Äî not reversible to identity data</td></tr>
      <tr><td>DID + score + credentials</td><td>üîÅ Shared</td><td>Included in SPT token headers when calling protected services</td></tr>
    </table>

    <h2>Credential Types</h2>
    <p>Each verification step adds a credential to the token:</p>
    <table>
      <tr><th>Credential</th><th>Score</th><th>How obtained</th></tr>
      <tr><td><code>email</code></td><td>+8</td><td>Email OTP verification during setup</td></tr>
      <tr><td><code>phone</code></td><td>+12</td><td>SMS OTP verification</td></tr>
      <tr><td><code>github</code></td><td>+16</td><td>GitHub OAuth (verifies developer identity)</td></tr>
      <tr><td><code>document</code></td><td>+20</td><td>Government ID OCR successful</td></tr>
      <tr><td><code>face_match</code></td><td>+16</td><td>Selfie matches ID photo (cosine ‚â• 0.6)</td></tr>
      <tr><td><code>biometric</code></td><td>+8</td><td>Privacy proof generated and registered</td></tr>
    </table>

    <h2>Token Structure</h2>
    <pre><code>{
  <span class="string">"did"</span>:         <span class="string">"did:soulprint:abc123..."</span>,
  <span class="string">"score"</span>:       <span class="keyword">72</span>,
  <span class="string">"identity"</span>:   <span class="keyword">62</span>,
  <span class="string">"reputation"</span>: <span class="keyword">10</span>,
  <span class="string">"country"</span>:    <span class="string">"CO"</span>,
  <span class="string">"credentials"</span>: [<span class="string">"email"</span>, <span class="string">"document"</span>, <span class="string">"face_match"</span>],
  <span class="string">"issuedAt"</span>:   <span class="string">"2026-02-24T10:00:00Z"</span>,
  <span class="string">"expiresAt"</span>:  <span class="string">"2026-08-24T10:00:00Z"</span>,
  <span class="string">"signature"</span>:  <span class="string">"&lt;Ed25519 signature over all fields&gt;"</span>,
  <span class="string">"issuer"</span>:     <span class="string">"soulprint-cli/0.1.3"</span>
}</code></pre>

    <h2>Renewal</h2>
    <p>Tokens expire after 6 months. Renewal re-runs only the face matching step (OCR is cached):</p>
    <pre><code>npx soulprint renew</code></pre>
    <div class="callout callout-warn">
      <div class="callout-title">Token expiry</div>
      Services using <code>soulprint-mcp</code> or <code>soulprint-express</code> will return a 403 with <code>"token expired"</code> message. Always handle this gracefully in your UI.
    </div>

    <h2>Anti-Replay Protection</h2>
    <p>Each person produces a unique identity hash. Validator nodes keep a registry of seen hashes. If two different devices try to register with the same identity data (Sybil attack), the second registration is rejected. This guarantees <strong>one identity per real person</strong> across all devices.</p>
  </main>
</div>
</body>
</html>
